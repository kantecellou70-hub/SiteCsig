{% extends 'content_management/base.html' %}
{% load static %}
{% load i18n %}

{% block title %}Tableau de bord - Gestion de contenu CSIG{% endblock %}

{% block page_title %}Tableau de bord{% endblock %}
{% block page_subtitle %}
<p class="text-muted mb-0">Bienvenue dans votre espace de gestion de contenu</p>
{% endblock %}

{% block page_actions %}
<div class="d-flex gap-2">
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#quickCreateModal">
        <i class="fas fa-plus me-2"></i>Créer rapidement
    </button>
    <button class="btn btn-outline-secondary" onclick="refreshDashboard()">
        <i class="fas fa-sync-alt me-2"></i>Actualiser
    </button>
</div>
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Statistiques principales avec design moderne -->
    <div class="stats-grid">
        <div class="stat-card stat-primary">
            <div class="stat-icon-wrapper">
                <div class="stat-icon">
                    <i class="fas fa-newspaper"></i>
                </div>
                <div class="stat-trend up">
                    <i class="fas fa-arrow-up"></i>
                    <span>12%</span>
                </div>
            </div>
            <div class="stat-content">
                <h3 class="stat-number" data-count="{{ total_articles|default:0 }}">0</h3>
                <p class="stat-label">Articles</p>
                <div class="stat-details">
                    <span class="stat-badge published">{{ published_articles|default:0 }} publiés</span>
                    <span class="stat-badge draft">{{ draft_articles|default:0 }} brouillons</span>
                </div>
            </div>
        </div>

        <div class="stat-card stat-success">
            <div class="stat-icon-wrapper">
                <div class="stat-icon">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <div class="stat-trend up">
                    <i class="fas fa-arrow-up"></i>
                    <span>8%</span>
                </div>
            </div>
            <div class="stat-content">
                <h3 class="stat-number" data-count="{{ total_events|default:0 }}">0</h3>
                <p class="stat-label">Événements</p>
                <div class="stat-details">
                    <span class="stat-badge upcoming">{{ upcoming_events_count|default:0 }} à venir</span>
                    <span class="stat-badge ongoing">2 en cours</span>
                </div>
            </div>
        </div>

        <div class="stat-card stat-info">
            <div class="stat-icon-wrapper">
                <div class="stat-icon">
                    <i class="fas fa-project-diagram"></i>
                </div>
                <div class="stat-trend up">
                    <i class="fas fa-arrow-up"></i>
                    <span>15%</span>
                </div>
            </div>
            <div class="stat-content">
                <h3 class="stat-number" data-count="{{ total_projects|default:0 }}">0</h3>
                <p class="stat-label">Projets</p>
                <div class="stat-details">
                    <span class="stat-badge active">{{ active_projects|default:0 }} actifs</span>
                    <span class="stat-badge completed">3 terminés</span>
                </div>
            </div>
        </div>

        <div class="stat-card stat-warning">
            <div class="stat-icon-wrapper">
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-trend down">
                    <i class="fas fa-arrow-down"></i>
                    <span>3%</span>
                </div>
            </div>
            <div class="stat-content">
                <h3 class="stat-number" data-count="{{ total_users|default:0 }}">0</h3>
                <p class="stat-label">Utilisateurs</p>
                <div class="stat-details">
                    <span class="stat-badge online">{{ active_users|default:0 }} en ligne</span>
                    <span class="stat-badge new">5 nouveaux</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Graphique de performance -->
    <div class="performance-section">
        <div class="row g-4">
            <div class="col-lg-8">
                <div class="content-section">
                    <div class="section-header">
                        <h3><i class="fas fa-chart-line me-2"></i>Performance du contenu</h3>
                        <div class="header-actions">
                            <select class="form-select form-select-sm" id="timeRange">
                                <option value="7">7 derniers jours</option>
                                <option value="30" selected>30 derniers jours</option>
                                <option value="90">3 derniers mois</option>
                            </select>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="performanceChart" height="300"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="content-section">
                    <div class="section-header">
                        <h3><i class="fas fa-trophy me-2"></i>Top Performers</h3>
                    </div>
                    <div class="top-performers">
                        <div class="performer-item">
                            <div class="performer-rank">1</div>
                            <div class="performer-avatar">
                                <i class="fas fa-newspaper"></i>
                            </div>
                            <div class="performer-info">
                                <h6>Article sur l'IA</h6>
                                <p>2.5k vues • 45 partages</p>
                            </div>
                            <div class="performer-score">
                                <span class="score-badge">98</span>
                            </div>
                        </div>
                        
                        <div class="performer-item">
                            <div class="performer-rank">2</div>
                            <div class="performer-avatar">
                                <i class="fas fa-calendar"></i>
                            </div>
                            <div class="performer-info">
                                <h6>Conférence Tech</h6>
                                <p>1.8k participants • 89% satisfaction</p>
                            </div>
                            <div class="performer-score">
                                <span class="score-badge">95</span>
                            </div>
                        </div>
                        
                        <div class="performer-item">
                            <div class="performer-rank">3</div>
                            <div class="performer-avatar">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <div class="performer-info">
                                <h6>Projet GreenTech</h6>
                                <p>75% complété • 12 partenaires</p>
                            </div>
                            <div class="performer-score">
                                <span class="score-badge">92</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenu récent et actions rapides -->
    <div class="dashboard-content">
        <div class="row g-4">
            <!-- Colonne principale -->
            <div class="col-lg-8">
                <!-- Articles récents avec design amélioré -->
                <div class="content-section">
                    <div class="section-header">
                        <h3><i class="fas fa-newspaper me-2"></i>Articles récents</h3>
                        <a href="{% url 'content_management:article_list' %}" class="btn btn-sm btn-outline-primary">
                            Voir tous <i class="fas fa-arrow-right ms-1"></i>
                        </a>
                    </div>
                    <div class="recent-content">
                        {% if recent_articles %}
                            {% for article in recent_articles %}
                            <div class="content-item">
                                <div class="content-image">
                                    {% if article.featured_image %}
                                        <img src="{{ article.featured_image.url }}" alt="{{ article.title }}">
                                    {% else %}
                                        <div class="no-image">
                                            <i class="fas fa-image"></i>
                                        </div>
                                    {% endif %}
                                    <div class="content-overlay">
                                        <div class="overlay-actions">
                                            <a href="{% url 'content_management:article_edit' article.pk %}" 
                                               class="btn btn-sm btn-light" title="Modifier">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                            <a href="{% url 'content_management:article_detail' article.pk %}" 
                                               class="btn btn-sm btn-light" title="Voir">
                                                <i class="fas fa-eye"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="content-details">
                                    <div class="content-header">
                                        <h4 class="content-title">{{ article.title }}</h4>
                                        <span class="status-badge status-{{ article.status }}">
                                            {{ article.get_status_display }}
                                        </span>
                                    </div>
                                    <p class="content-excerpt">{{ article.excerpt|truncatewords:20|default:"Aucun extrait disponible" }}</p>
                                    <div class="content-meta">
                                        <div class="meta-left">
                                            <span class="meta-item">
                                                <i class="fas fa-user me-1"></i>{{ article.author.get_full_name|default:article.author.username }}
                                            </span>
                                            <span class="meta-item">
                                                <i class="fas fa-calendar me-1"></i>{{ article.created_at|date:"d/m/Y" }}
                                            </span>
                                        </div>
                                        <div class="meta-right">
                                            <span class="meta-item">
                                                <i class="fas fa-eye me-1"></i>{{ article.views_count|default:0 }}
                                            </span>
                                            <span class="meta-item">
                                                <i class="fas fa-heart me-1"></i>12
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        {% else %}
                            <div class="empty-state">
                                <div class="empty-icon">
                                    <i class="fas fa-newspaper"></i>
                                </div>
                                <h5>Aucun article trouvé</h5>
                                <p>Commencez par créer votre premier article pour enrichir votre contenu</p>
                                <a href="{% url 'content_management:article_create' %}" class="btn btn-primary">
                                    <i class="fas fa-plus me-2"></i>Créer un article
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Événements à venir avec timeline -->
                <div class="content-section">
                    <div class="section-header">
                        <h3><i class="fas fa-calendar-alt me-2"></i>Événements à venir</h3>
                        <a href="{% url 'content_management:event_list' %}" class="btn btn-sm btn-outline-primary">
                            Voir tous <i class="fas fa-arrow-right ms-1"></i>
                        </a>
                    </div>
                    <div class="events-timeline">
                        {% if upcoming_events %}
                            {% for event in upcoming_events %}
                            <div class="timeline-item">
                                <div class="timeline-marker">
                                    <div class="marker-dot"></div>
                                    <div class="marker-line"></div>
                                </div>
                                <div class="timeline-content">
                                    <div class="event-card">
                                        <div class="event-date">
                                            <div class="date-main">{{ event.start_date|date:"d" }}</div>
                                            <div class="date-month">{{ event.start_date|date:"M" }}</div>
                                            <div class="date-year">{{ event.start_date|date:"Y" }}</div>
                                        </div>
                                        <div class="event-info">
                                            <h5 class="event-title">{{ event.title }}</h5>
                                            <div class="event-details">
                                                <span class="event-location">
                                                    <i class="fas fa-map-marker-alt me-2"></i>{{ event.location }}
                                                </span>
                                                <span class="event-time">
                                                    <i class="fas fa-calendar me-2"></i>{{ event.start_date|date:"d/m/Y" }} - {{ event.end_date|date:"d/m/Y" }}
                                                </span>
                                            </div>
                                            <div class="event-stats">
                                                <span class="stat-item">
                                                    <i class="fas fa-users me-1"></i>45 participants
                                                </span>
                                                <span class="stat-item">
                                                    <i class="fas fa-star me-1"></i>4.8/5
                                                </span>
                                            </div>
                                        </div>
                                        <div class="event-actions">
                                            <a href="{% url 'content_management:event_edit' event.pk %}" 
                                               class="btn btn-sm btn-outline-primary">Modifier</a>
                                            <button class="btn btn-sm btn-outline-success">Partager</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        {% else %}
                            <div class="empty-state">
                                <div class="empty-icon">
                                    <i class="fas fa-calendar"></i>
                                </div>
                                <h5>Aucun événement à venir</h5>
                                <p>Planifiez vos prochains événements pour engager votre communauté</p>
                                <a href="{% url 'content_management:event_create' %}" class="btn btn-primary">
                                    <i class="fas fa-plus me-2"></i>Créer un événement
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Sidebar avec actions rapides et statistiques -->
            <div class="col-lg-4">
                <!-- Actions rapides avec design moderne -->
                <div class="content-section">
                    <div class="section-header">
                        <h3><i class="fas fa-bolt me-2"></i>Actions rapides</h3>
                    </div>
                    <div class="quick-actions">
                        <a href="{% url 'content_management:article_create' %}" class="quick-action-item">
                            <div class="action-icon">
                                <i class="fas fa-newspaper"></i>
                            </div>
                            <div class="action-text">
                                <h5>Nouvel article</h5>
                                <p>Créer un nouvel article</p>
                            </div>
                            <div class="action-arrow">
                                <i class="fas fa-chevron-right"></i>
                            </div>
                        </a>

                        <a href="{% url 'content_management:event_create' %}" class="quick-action-item">
                            <div class="action-icon">
                                <i class="fas fa-calendar-plus"></i>
                            </div>
                            <div class="action-text">
                                <h5>Nouvel événement</h5>
                                <p>Planifier un événement</p>
                            </div>
                            <div class="action-arrow">
                                <i class="fas fa-chevron-right"></i>
                            </div>
                        </a>

                        <a href="{% url 'content_management:project_create' %}" class="quick-action-item">
                            <div class="action-icon">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <div class="action-text">
                                <h5>Nouveau projet</h5>
                                <p>Ajouter un projet</p>
                            </div>
                            <div class="action-arrow">
                                <i class="fas fa-chevron-right"></i>
                            </div>
                        </a>

                        <a href="{% url 'content_management:category_create' %}" class="quick-action-item">
                            <div class="action-icon">
                                <i class="fas fa-tags"></i>
                            </div>
                            <div class="action-text">
                                <h5>Nouvelle catégorie</h5>
                                <p>Organiser le contenu</p>
                            </div>
                            <div class="action-arrow">
                                <i class="fas fa-chevron-right"></i>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- Activité récente avec design amélioré -->
                <div class="content-section">
                    <div class="section-header">
                        <h3><i class="fas fa-history me-2"></i>Activité récente</h3>
                    </div>
                    <div class="recent-activity">
                        {% if recent_activity %}
                            {% for activity in recent_activity %}
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-{{ activity.icon|default:'info-circle' }}"></i>
                                </div>
                                <div class="activity-content">
                                    <p class="activity-text">{{ activity.description }}</p>
                                    <small class="activity-time">{{ activity.created_at|timesince }}</small>
                                </div>
                                <div class="activity-status">
                                    <span class="status-dot"></span>
                                </div>
                            </div>
                            {% endfor %}
                        {% else %}
                            <div class="empty-state text-center py-3">
                                <div class="empty-icon">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <p class="text-muted mb-0">Aucune activité récente</p>
                            </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Statistiques avancées avec graphiques -->
                <div class="content-section">
                    <div class="section-header">
                        <h3><i class="fas fa-chart-pie me-2"></i>Répartition</h3>
                    </div>
                    <div class="stats-breakdown">
                        <div class="stat-breakdown-item">
                            <div class="breakdown-header">
                                <span class="breakdown-label">Articles par catégorie</span>
                                <span class="breakdown-value">Total: {{ total_articles|default:0 }}</span>
                            </div>
                            <div class="breakdown-chart">
                                <canvas id="categoryChart" height="120"></canvas>
                            </div>
                        </div>
                        
                        <div class="stat-breakdown-item">
                            <div class="breakdown-header">
                                <span class="breakdown-label">Statuts des projets</span>
                                <span class="breakdown-value">Total: {{ total_projects|default:0 }}</span>
                            </div>
                            <div class="breakdown-chart">
                                <canvas id="projectChart" height="120"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de création rapide avec design moderne -->
<div class="modal fade" id="quickCreateModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-plus me-2"></i>Créer rapidement
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="quick-create-options">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="create-option" onclick="quickCreate('article')">
                                <div class="option-icon">
                                    <i class="fas fa-newspaper"></i>
                                </div>
                                <h5>Article</h5>
                                <p>Créer un nouvel article</p>
                                <div class="option-features">
                                    <span class="feature-tag">Riche contenu</span>
                                    <span class="feature-tag">SEO optimisé</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="create-option" onclick="quickCreate('event')">
                                <div class="option-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <h5>Événement</h5>
                                <p>Planifier un événement</p>
                                <div class="option-features">
                                    <span class="feature-tag">Gestion participants</span>
                                    <span class="feature-tag">Notifications</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="create-option" onclick="quickCreate('project')">
                                <div class="option-icon">
                                    <i class="fas fa-project-diagram"></i>
                                </div>
                                <h5>Projet</h5>
                                <p>Ajouter un projet</p>
                                <div class="option-features">
                                    <span class="feature-tag">Suivi avancement</span>
                                    <span class="feature-tag">Gestion équipe</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="create-option" onclick="quickCreate('category')">
                                <div class="option-icon">
                                    <i class="fas fa-tags"></i>
                                </div>
                                <h5>Catégorie</h5>
                                <p>Organiser le contenu</p>
                                <div class="option-features">
                                    <span class="feature-tag">Hiérarchie</span>
                                    <span class="feature-tag">Navigation</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// Animation des compteurs avec easing
function animateCounters() {
    const counters = document.querySelectorAll('.stat-number[data-count]');
    counters.forEach(counter => {
        const target = parseInt(counter.getAttribute('data-count'));
        const duration = 2000;
        const startTime = performance.now();
        
        function updateCounter(currentTime) {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            
            // Easing function pour une animation plus naturelle
            const easeOutQuart = 1 - Math.pow(1 - progress, 4);
            const current = Math.floor(target * easeOutQuart);
            
            counter.textContent = current;
            
            if (progress < 1) {
                requestAnimationFrame(updateCounter);
            }
        }
        
        requestAnimationFrame(updateCounter);
    });
}

// Création rapide avec feedback
function quickCreate(type) {
    const urls = {
        'article': '{% url "content_management:article_create" %}',
        'event': '{% url "content_management:event_create" %}',
        'project': '{% url "content_management:project_create" %}',
        'category': '{% url "content_management:category_create" %}'
    };
    
    if (urls[type]) {
        // Afficher une notification de redirection
        if (window.AdminInterface && window.AdminInterface.showNotification) {
            window.AdminInterface.showNotification('Redirection vers la page de création...', 'info');
        }
        
        // Fermer le modal
        const modal = bootstrap.Modal.getInstance(document.getElementById('quickCreateModal'));
        if (modal) modal.hide();
        
        // Rediriger vers la page de création
        setTimeout(() => {
            window.location.href = urls[type];
        }, 500);
    }
}

// Actualiser le tableau de bord avec feedback visuel
function refreshDashboard() {
    const refreshBtn = event.target;
    const originalText = refreshBtn.innerHTML;
    
    // Afficher l'état de chargement
    refreshBtn.disabled = true;
    refreshBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Actualisation...';
    
    // Simuler un délai d'actualisation
    setTimeout(() => {
        location.reload();
    }, 1000);
}

// Supprimer du contenu avec confirmation
function deleteContent(type, id) {
    const message = `Êtes-vous sûr de vouloir supprimer cet élément ?`;
    
    if (confirm(message)) {
        // Afficher une notification de suppression en cours
        if (window.AdminInterface && window.AdminInterface.showNotification) {
            window.AdminInterface.showNotification('Suppression en cours...', 'info');
        }
        
        // Implémenter la suppression AJAX ici
        console.log(`Supprimer ${type} avec l'ID ${id}`);
        
        // Pour l'instant, recharger la page
        setTimeout(() => {
            location.reload();
        }, 1000);
    }
}

// Initialisation des graphiques
function initializeCharts() {
    // Graphique de performance
    const performanceCtx = document.getElementById('performanceChart');
    if (performanceCtx) {
        new Chart(performanceCtx, {
            type: 'line',
            data: {
                labels: ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'],
                datasets: [{
                    label: 'Vues',
                    data: [1200, 1900, 3000, 5000, 2000, 3000, 4000],
                    borderColor: '#0d4786',
                    backgroundColor: 'rgba(13, 71, 134, 0.1)',
                    tension: 0.4,
                    fill: true
                }, {
                    label: 'Interactions',
                    data: [800, 1200, 2000, 3500, 1500, 2200, 2800],
                    borderColor: '#28a745',
                    backgroundColor: 'rgba(40, 167, 69, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }
    
    // Graphique des catégories
    const categoryCtx = document.getElementById('categoryChart');
    if (categoryCtx) {
        new Chart(categoryCtx, {
            type: 'doughnut',
            data: {
                labels: ['Sciences', 'Technologie', 'Environnement', 'Santé'],
                datasets: [{
                    data: [30, 25, 20, 25],
                    backgroundColor: ['#0d4786', '#28a745', '#ffc107', '#dc3545']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 10,
                            usePointStyle: true
                        }
                    }
                }
            }
        });
    }
    
    // Graphique des projets
    const projectCtx = document.getElementById('projectChart');
    if (projectCtx) {
        new Chart(projectCtx, {
            type: 'doughnut',
            data: {
                labels: ['Actifs', 'Terminés', 'En attente'],
                datasets: [{
                    data: [45, 30, 25],
                    backgroundColor: ['#28a745', '#0d4786', '#ffc107']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 10,
                            usePointStyle: true
                        }
                    }
                }
            }
        });
    }
}

// Initialisation au chargement de la page
document.addEventListener('DOMContentLoaded', function() {
    // Animer les compteurs
    animateCounters();
    
    // Initialiser les graphiques
    initializeCharts();
    
    // Ajouter des effets hover avancés
    const statCards = document.querySelectorAll('.stat-card');
    statCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-8px) scale(1.03)';
            this.style.boxShadow = '0 20px 40px rgba(0,0,0,0.15)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
            this.style.boxShadow = '0 4px 15px rgba(0,0,0,0.1)';
        });
    });
    
    // Effets sur les éléments de contenu
    const contentItems = document.querySelectorAll('.content-item, .event-card');
    contentItems.forEach(item => {
        item.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-2px)';
            this.style.boxShadow = '0 8px 25px rgba(0,0,0,0.15)';
        });
        
        item.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
            this.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
        });
    });
    
    // Effets sur les actions rapides
    const quickActions = document.querySelectorAll('.quick-action-item');
    quickActions.forEach(action => {
        action.addEventListener('mouseenter', function() {
            this.style.transform = 'translateX(8px) scale(1.02)';
        });
        
        action.addEventListener('mouseleave', function() {
            this.style.transform = 'translateX(0) scale(1)';
        });
    });
    
    // Gestion du changement de période pour le graphique
    const timeRange = document.getElementById('timeRange');
    if (timeRange) {
        timeRange.addEventListener('change', function() {
            // Ici vous pourriez mettre à jour le graphique avec de nouvelles données
            console.log('Période changée:', this.value);
        });
    }
});

// Gestion des erreurs avec notifications
window.addEventListener('error', function(e) {
    console.error('Erreur JavaScript:', e.error);
    if (window.AdminInterface && window.AdminInterface.showNotification) {
        window.AdminInterface.showNotification('Une erreur est survenue', 'error');
    }
});
</script>
{% endblock %}
